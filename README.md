# GPT Bridge Project

Проект для автоматизации взаимодействия с ChatGPT через браузер с предоставлением API интерфейса.

## Функционал

1. **Автоматическое открытие браузера** - открывает ChatGPT в браузере Chromium
2. **Обработка cookie-окна** - автоматически принимает все cookies
3. **API интерфейс** - предоставляет REST API для отправки запросов к ChatGPT
4. **Автоматическое извлечение ответов** - находит и возвращает сгенерированные ответы

## Установка и запуск

### Предварительные требования

- Python 3.13+
- Poetry (для управления зависимостями)

### Установка

```bash
# Клонирование репозитория
git clone https://github.com/your-username/GPTBridge_Progect.git
cd GPTBridge_Progect

# Установка зависимостей
poetry install

# Установка браузеров Playwright
poetry run playwright install
```

### Запуск

```bash
# Запуск основного приложения
poetry run python -m app.main
```

После запуска приложение:

- Откроет браузер с ChatGPT
- Обработает cookie-окно (если появится)
- Запустит API сервер на порту 8010

## Использование API

### Отправка запроса к ChatGPT

**Endpoint:** `POST /ask`

**Параметры:**

```json
{
  "prompt": "Ваш запрос к ChatGPT"
}
```

**Пример использования:**

```bash
curl -X POST http://localhost:8010/ask \
  -H "Content-Type: application/json" \
  -d '{"prompt": "Hello, how are you?"}'
```

**Ответ:**

```json
{
  "answer": "Hey there! I'm doing well, thanks for asking. How about you?"
}
```

### Проверка состояния сервера

**Endpoint:** `GET /health`

```bash
curl http://localhost:8010/health
```

**Ответ:**

```json
{
  "status": "healthy",
  "service": "GPT Bridge API"
}
```

## Структура проекта

```
GPTBridge_Progect/
├── app/
│   ├── main.py              # Главный файл приложения
│   ├── settings.py          # Настройки
│   ├── client/
│   │   └── browser_client.py # Клиент для работы с браузером
│   ├── server/
│   │   └── api_server.py    # API сервер
│   └── services/
│       └── chatgpt_bridge.py # Основной сервис
├── pyproject.toml          # Конфигурация Poetry
└── README.md               # Документация
```

## Технические детали

### Используемые технологии

- **Playwright** - для автоматизации браузера
- **FastAPI** - для создания API
- **Uvicorn** - ASGI сервер
- **Poetry** - управление зависимостями

### Особенности реализации

1. **Обход обнаружения автоматизации** - используется undetected-chromedriver и кастомные настройки
2. **Множественные селекторы** - для надежного поиска элементов интерфейса
3. **Асинхронная архитектура** - для эффективной работы с браузером и API
4. **Обработка ошибок** - корректная обработка таймаутов и исключений

## Интеграция с Telegram-ботом

Проект может быть легко интегрирован с Telegram-ботом:

```python
import requests

def send_to_chatgpt(message):
    response = requests.post(
        "http://localhost:8010/ask",
        json={"prompt": message}
    )
    return response.json()["answer"]
```

## Возможные проблемы и решения

### Браузер не запускается

- Убедитесь, что установлены все зависимости: `poetry install`
- Проверьте установку браузеров: `poetry run playwright install`

### Не находится поле ввода

- Проект использует множественные селекторы для надежности
- При изменении интерфейса ChatGPT может потребоваться обновление селекторов

### Таймауты при ожидании ответа

- Настройки таймаутов можно изменить в `app/settings.py`
- При медленном интернете может потребоваться увеличение времени ожидания

## Лицензия

MIT License <https://github.com/8adimka>

Copyright (c) 2025 GPT Bridge Project

Разрешение предоставляется бесплатно любому лицу, получившему копию этого программного обеспечения и сопутствующей документации (далее "Программное обеспечение"), для использования Программного обеспечения без ограничений, включая, без ограничений, права на использование, копирование, изменение, объединение, публикацию, распространение, сублицензирование и/или продажу копий Программного обеспечения, а также лицам, которым предоставляется данное Программное обеспечение, при соблюдении следующих условий:

Указанное выше уведомление об авторских правах и данные условия должны быть включены во все копии или значимые части Программного обеспечения.

ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ «КАК ЕСТЬ», БЕЗ КАКИХ-ЛИБО ГАРАНТИЙ, ЯВНО ВЫРАЖЕННЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ, НО НЕ ОГРАНИЧИВАЯСЬ ГАРАНТИЯМИ ТОВАРНОЙ ПРИГОДНОСТИ, СООТВЕТСТВИЯ ПО ЕГО КОНКРЕТНОМУ НАЗНАЧЕНИЮ И НЕНАРУШЕНИЯ ПРАВ. НИ В КАКОМ СЛУЧАЕ АВТОРЫ ИЛИ ПРАВООБЛАДАТЕЛИ НЕ НЕСУТ ОТВЕТСТВЕННОСТИ ПО КАКИМ-ЛИБО ИСКАМ, ЗА УЩЕРБ ИЛИ ПО ИНЫМ ТРЕБОВАНИЯМ, В ТОМ ЧИСЛЕ, ПРИ ДЕЙСТВИИ КОНТРАКТА, ДЕЛИКТЕ ИЛИ ИНОЙ СИТУАЦИИ, ВОЗНИКШИМ ИЗ-ЗА ИСПОЛЬЗОВАНИЯ ПРОГРАММНОГО ОБЕСПЕЧЕНИЯ ИЛИ ИНЫХ ДЕЙСТВИЙ С ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ.
